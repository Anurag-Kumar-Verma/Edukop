<div class="container">
    <h1 class="text-center mt-3 danger">{{formTitle}}</h1>
    <form [formGroup]="addressFormGroup" class="mt-3 mx-auto pb-3">
        <h3>Contact Detail</h3>
        <div class="row userDetail">
            <div class="col-12 col-sm-6">
                <label for="fullName" class="mb-1">Name <sup class="danger">*</sup></label>
                <input type="text" id="fullName" name="fullName" class="form-control" placeholder="Full Name"
                    formControlName="fullName" required>
                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="fullName"
                    [errorMsg]="'Please enter your name'"></app-form-input-validation>
            </div>
            <div class="col-12 col-sm-6">
                <label for="phone" class="mb-1">Mobile Number <sup class="danger">*</sup></label>
                <input type="tel" id="phone" name="phone" class="form-control" placeholder="Mobile"
                    formControlName="phone" required>
                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="phone"
                    [errorMsg]="'Please enter mobile no'"></app-form-input-validation>
            </div>
        </div>

        <h3>Address</h3>
        <div class="row">
            <div class="col-12 col-sm-6">
                <label for="address" class="mb-1">Address <small>(House No, Building, Area)</small> <sup
                        class="danger">*</sup></label>
                <input type="text" id="address" name="address" class="form-control"
                    placeholder="Address (House No, Building, Area)" formControlName="address" required>
                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="address"
                    [errorMsg]="'Please enter your address'"></app-form-input-validation>
            </div>
            <div class="col-12 col-sm-6">
                <label for="landmark" class="mb-1">Locality / Town <sup class="danger">*</sup></label>
                <input type="text" id="landmark" class="form-control" name="landmark" placeholder="Locality / Town"
                    formControlName="landmark" required>
                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="landmark"
                    [errorMsg]="'Please enter your landmark'"></app-form-input-validation>
            </div>
            <div class="col-12 col-sm-6">
                <label for="state" class="mb-1">State <sup class="danger">*</sup></label>
                <mat-select class="form-control" formControlName="state" (selectionChange)="setState($event)" required="true" placeholder="Select">
                    <mat-option>
                        <ngx-mat-select-search [(ngModel)]="searchString" [ngModelOptions]="{ standalone: true }" name="search" [placeholderLabel]="'Search...'" [noEntriesFoundLabel]="'Not found'" [ngModelOptions]="{standalone: true}" ngDefaultControl>
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let state of states | stringFilterBy: searchString: 'name'" [value]="state.name
                    ">{{state.name}}</mat-option>
                </mat-select>

                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="state"
                    [errorMsg]="'Please select state'"></app-form-input-validation>
            </div>
            <div class="col-12 col-sm-6">
                <label for="city" class="mb-1">City <sup class="danger">*</sup></label>
                <mat-select class="form-control" formControlName="city" required="true" placeholder="Select">
                    <mat-option>
                        <ngx-mat-select-search [(ngModel)]="searchString" [ngModelOptions]="{ standalone: true }" name="search" [placeholderLabel]="'Search...'" [noEntriesFoundLabel]="'Not found'" [ngModelOptions]="{standalone: true}" ngDefaultControl>
                        </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let city of cities | stringFilterBy: searchString: 'name'" [value]="city.name
                    ">
                        {{city.name}}</mat-option>
                </mat-select>


                <!-- <div class="form-control pointer d-flex align-items-center justify-content-between"
                    [matMenuTriggerFor]="city">
                    <span class="textSmall2 selectText">{{selectedCity || "Select"}}</span>
                    <span class="formatBtn toggleBtn pointer">
                        <i class="mdi mdi-menu-down text-gray mdi-18px"></i>
                    </span>
                </div>
                <mat-menu class="countryList custom-scrollbar-y" #city="matMenu" xPosition="before" yPosition="below">
                    <input type="search" [(ngModel)]="searchString" [ngModelOptions]="{standalone: true}"
                        id="citySearch" class="searchInput text1" (click)="$event.stopPropagation();"
                        placeholder="Search">
                    <ul class="menus-list .custom-scrollbar-y p-0">
                        <li mat-menu-item class="textSmall2 matOption"
                            *ngFor="let city of cities | stringFilterBy: searchString: 'name';"
                            (click)="selectCity(city.name)">{{city.name}}</li>
                    </ul>
                </mat-menu>
                
                <mat-autocomplete #auto2="matAutocomplete">
                    <mat-option *ngFor="let option of filteredCity | async" [value]="option">
                        {{option}}
                    </mat-option>
                </mat-autocomplete> -->
                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="city"
                    [errorMsg]="'Please select city'"></app-form-input-validation>
            </div>
            <div class="col-12 col-sm-6">
                <label for="pincode" class="mb-1">Pincode <sup class="danger">*</sup></label>
                <input type="number" id="pincode" class="form-control"
                    name="pincode" placeholder="Pincode" formControlName="pincode" required>

                <app-form-input-validation [form]="addressFormGroup" class="textSmal" formInput="pincode"
                    [errorMsg]="'Please enter pincode'"></app-form-input-validation>
            </div>
        </div>

        <div class="d-flex align-items-center justify-content-around mx-auto btn_group">
            <button type="reset" mat-button class="btn btn-light cancel_btn" (click)="cancel()">Cancel</button>
            <button type="submit" mat-button class="btn btn-danger submit_btn"
               [disabled]="addressFormGroup.invalid" (click)="submit()">{{buttonText}}</button>
        </div>
    </form>
</div>